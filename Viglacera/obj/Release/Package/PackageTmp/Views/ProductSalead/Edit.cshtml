@model Viglacera.Models.tblProductSale
@{
    ViewBag.Title = "Chương trình khuyến mại";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}
<script type="text/javascript">
    var editor;
    function createEditor(languageCode, id) {
        var editor = CKEDITOR.replace(id, {
            language: languageCode
        });
    }

    $(function () {
        createEditor('vi', 'Content');
    });

</script>

<script type="text/javascript">
    $(function () {
        $("#SelectImages").click(function () {
            var finder = new CKFinder();
            finder.selectActionFunction = function (fileUrl) {
                $("#ImageThumb").val(fileUrl);
            };
            finder.popup();

        });
        $("#SelectImages1").click(function () {
            var finder = new CKFinder();
            finder.selectActionFunction = function (fileUrl) {
                $("#ImageBanner").val(fileUrl);
            };
            finder.popup();

        });
        $("#SelectImages2").click(function () {
            var finder = new CKFinder();
            finder.selectActionFunction = function (fileUrl) {
                $("#ImageSale").val(fileUrl);
            };
            finder.popup();

        });
    });
</script>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <div id="main-content">
        <div class="container-fluid">
            <div style="width: 100%; margin: 0 auto;">

                <div id="Breadcrumb" class="Block Breadcrumb ui-widget-content ui-corner-top ui-corner-bottom">
                    <ul>
                        <li><a href='/admin'><i class="icon-home" style="font-size:14px;"></i> Trang chủ</a></li>
                        <li class='SecondLast'><a href="/Productad">Sản phẩm</a></li>
                        <li class='Last'><span>Sửa khuyến mại</span></li>
                    </ul>
                </div>

                <div style="clear: both;"></div>

                <div id="cph_Main_ContentPane">
                    <div class="widget">
                        <!-- widget-title -->
                        <div class="widget-title">
                            <h4><i class="icon-reorder"></i>&nbsp;Sửa khuyến mại</h4>

                            <!-- Button -->
                            <div class="ui-widget-content ui-corner-top ui-corner-bottom">
                                <div id="toolbox">
                                    <div style="float:right;" class="toolbox-content">

                                        <table class="toolbar">
                                            <tr>

                                                <td align="center">
                                                    <button type="submit" class="toolbar btn btn-info" name="btnSave" id="btnSave"><i class="icon-save"></i> &nbsp;Lưu lại</button>

                                                </td>

                                                <td align="center">
                                                    <button type="submit" class="toolbar btn btn-info" name="btnSaveCreate" id="btnSaveCreate"><i class="icon-ok"></i> &nbsp;Lưu và Thêm mới</button>

                                                </td>
                                                <td align="center">
                                                    <a id="cph_Main_ctl00_toolbox_rptAction_lbtAction_4" title="Quay lại" style="color:#FFF !important" class="toolbar btn btn-info" href="">
                                                        <i class="icon-chevron-left"></i>&nbsp;
                                                        Quay lại
                                                    </a>
                                                </td>
                                                <td align="center">
                                                    <a onclick="" id="cph_Main_ctl00_toolbox_rptAction_lbtAction_0" title="Trợ giúp" style="color:#FFF !important" class="toolbar btn btn-info" href="" )">
                                                        <i class="icon-question-sign"></i>&nbsp;
                                                        Trợ giúp
                                                    </a>
                                                </td>
                                            </tr>
                                        </table>

                                    </div>
                                </div>
                            </div>
                            <!-- End Button -->

                            <div id="hiddenToolBarScroll" class="scrollBox hidden">

                                <div class="FloatMenuBar" style="float:left; margin-left:20px">

                                    <div class="ui-widget-content ui-corner-top ui-corner-bottom">
                                        <div id="Div1">

                                            <div style="float:left;" class="toolbox-content">

                                                <table class="toolbar">
                                                    <tr>

                                                        <td align="center">
                                                            <button type="submit" class="toolbar btn btn-info" name="btnSave" id="btnSave"><i class="icon-save"></i> &nbsp;Lưu lại</button>

                                                        </td>

                                                        <td align="center">
                                                            <button type="submit" class="toolbar btn btn-info" name="btnSaveCreate" id="btnSaveCreate"><i class="icon-ok"></i> &nbsp;Lưu và Thêm mới</button>

                                                        </td>
                                                        <td align="center">
                                                            <a id="cph_Main_ctl00_toolbox_rptAction_lbtAction_4" title="Quay lại" style="color:#FFF !important" class="toolbar btn btn-info" href="">
                                                                <i class="icon-chevron-left"></i>&nbsp;
                                                                Quay lại
                                                            </a>
                                                        </td>
                                                        <td align="center">
                                                            <a onclick="" id="cph_Main_ctl00_toolbox_rptAction_lbtAction_0" title="Trợ giúp" style="color:#FFF !important" class="toolbar btn btn-info" href="" )">
                                                                <i class="icon-question-sign"></i>&nbsp;
                                                                Trợ giúp
                                                            </a>
                                                        </td>
                                                    </tr>
                                                </table>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- widget-title -->
                        <!-- widget-body -->
                        <div class="widget-body">
                            <div id="cph_Main_ctl00_notification_divNotice" style="padding-top:10px;">
                                <!-- Messange -->
                                @Html.Raw(ViewBag.thongbao)

                                <!-- End Messange -->
                            </div>
                            <table class="admintable" style="width: 100%;">

                                <tr>
                                    <td class="key">
                                        Tên chương trình <span class="Required">*</span>
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(p => p.Name, new { @class = "Name_ad txtName", @autofocus = "autofocus", @required = "required" })


                                        <span class="tooltip-help">
                                            <span class="tooltipContent">
                                                <p class="tooltiptitle">
                                                    tên chương trình
                                                </p>
                                                <p class="tooltipmessage">
                                                    tên chương trình
                                                </p>
                                            </span>
                                        </span>

                                    </td>
                                </tr>

                                <tr>
                                    <td class="key">
                                        Mã sản phẩm khuyến mại nổi bật
                                    </td>
                                    <td>
                                        @Html.TextAreaFor(p => p.CodeOne, new { @class = "Content_ad", @autofocus = "autofocus", @required = "required" })
                                        <span class="tooltip-help">
                                            <span class="tooltipContent">
                                                <p class="tooltiptitle">
                                                    Mã sản phẩm khuyến mại nổi bật
                                                </p>
                                                <p class="tooltipmessage">
                                                    Mã sản phẩm khuyến mại nổi bật
                                                </p>
                                            </span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="key">
                                        Mã sản phẩm khuyến mại
                                    </td>
                                    <td>
                                        @Html.TextAreaFor(p => p.CodeTrue, new { @class = "Content_ad", @autofocus = "autofocus", @required = "required" })
                                        <span class="tooltip-help">
                                            <span class="tooltipContent">
                                                <p class="tooltiptitle">
                                                    Mã sản phẩm khuyến mại
                                                </p>
                                                <p class="tooltipmessage">
                                                    Mã sản phẩm khuyến mại
                                                </p>
                                            </span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="key">
                                        Mã sản phẩm đồng bộ
                                    </td>
                                    <td>
                                        @Html.TextAreaFor(p => p.CodeSale, new { @class = "Content_ad", @autofocus = "autofocus", @required = "required" })
                                        <span class="tooltip-help">
                                            <span class="tooltipContent">
                                                <p class="tooltiptitle">
                                                    Mã sản phẩm đồng bộ
                                                </p>
                                                <p class="tooltipmessage">
                                                    Mã sản phẩm đồng bộ
                                                </p>
                                            </span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="key">
                                        Mô tả
                                    </td>
                                    <td>
                                        @Html.TextAreaFor(p => p.Description, new { @class = "Content_ad", @autofocus = "autofocus", @required = "required" })
                                        <span class="tooltip-help">
                                            <span class="tooltipContent">
                                                <p class="tooltiptitle">
                                                    Mô tả cho sản phẩm
                                                </p>
                                                <p class="tooltipmessage">
                                                    Mô trả cho sản phẩm, độ dài khuyến cáo từ 120 đến 160 ký tự
                                                </p>
                                            </span>
                                        </span>
                                        <span class="Mota" style="color: #F00"></span>

                                    </td>
                                </tr>
                                <tr>
                                    <td class="key">
                                        Nội dung Chi tiết
                                    </td>
                                    <td>
                                        @Html.TextAreaFor(p => p.Content, new { @class = "Content_ad" })
                                    </td>
                                </tr>

                                <tr>
                                    <td class="key">
                                        Ảnh đại diện
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(p => p.ImageThumb, new { @class = "Name_ad" })&nbsp;<input id="SelectImages" type="button" value="Lựa chọn ảnh" class="Images_ad" />

                                    </td>
                                </tr>
                                <tr>
                                    <td class="key">
                                        Ảnh banner
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(p => p.ImageBanner, new { @class = "Name_ad" })&nbsp;<input id="SelectImages1" type="button" value="Lựa chọn ảnh" class="Images_ad" />

                                    </td>
                                </tr>

                                <tr>
                                    <td class="key">
                                        Ảnh khuyến mại
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(p => p.ImageSale, new { @class = "Name_ad" })&nbsp;<input id="SelectImages2" type="button" value="Lựa chọn ảnh" class="Images_ad" />

                                    </td>
                                </tr>

                                <tr>
                                    <td class="key">
                                        Khẩu hiệu khuyến mại<span class="Required">*</span>
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(p => p.Slogan, new { @class = "Name_ad txtName", @autofocus = "autofocus", @required = "required" })


                                        <span class="tooltip-help">
                                            <span class="tooltipContent">
                                                <p class="tooltiptitle">
                                                    Khẩu hiệu khuyến mại
                                                </p>
                                                <p class="tooltipmessage">
                                                    Khẩu hiệu khuyến mại
                                                </p>
                                            </span>
                                        </span>

                                    </td>
                                </tr>
                                <tr>
                                    <td class="key">
                                        Dòng chữ chạy<span class="Required">*</span>
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(p => p.TextRun, new { @class = "Name_ad txtName", @autofocus = "autofocus", @required = "required" })


                                        <span class="tooltip-help">
                                            <span class="tooltipContent">
                                                <p class="tooltiptitle">
                                                    Dòng chữ chạy
                                                </p>
                                                <p class="tooltipmessage">
                                                    Dòng chữ chạy
                                                </p>
                                            </span>
                                        </span>

                                    </td>
                                </tr>
                                <tr>
                                    <td class="key">
                                        Thứ tự
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(p => p.Ord, new { @class = "Ord_ad"  })
                                        <span class="tooltip-help">
                                            <span class="tooltipContent">
                                                <p class="tooltiptitle">
                                                    Thứ tự hiển thị
                                                </p>
                                                <p class="tooltipmessage">
                                                    Thứ tự hiển thị của danh mục sản phẩm
                                                </p>
                                            </span>
                                        </span>
                                    </td>
                                </tr>


                                <tr>
                                    <td class="key">
                                        Thời gian bắt đầu
                                    </td>
                                    <td>
                                        <script>
                                            $(function () {
                                                $("#StartSale").datepicker();
                                            });

                                        </script>
                                        @Html.TextBoxFor(p => p.StartSale, new { @class = "Code", @required = "required", @type = "datetime", @autofocus = "autofocus", @Value = String.Format("{0:dd/MM/yyyy}", Model.StartSale) })


                                        <span class="tooltip-help">
                                            <span class="tooltipContent">
                                                <p class="tooltiptitle">
                                                    Thời gian bắt đầu
                                                </p>
                                                <p class="tooltipmessage">
                                                    Thời gian bắt đầu
                                                </p>
                                            </span>
                                        </span>
                                    </td>
                                </tr>

                                <tr>
                                    <td class="key">
                                        Thời gian kết thúc
                                    </td>
                                    <td>
                                        <script>
                                            $(function () {
                                                $("#StopSale").datepicker();
                                            });

                                        </script>
                                        @Html.TextBoxFor(p => p.StopSale, new { @class = "Code", @required = "required", @type = "datetime", @autofocus = "autofocus",@Value = String.Format("{0:dd/MM/yyyy}", Model.StopSale)  })


                                        <span class="tooltip-help">
                                            <span class="tooltipContent">
                                                <p class="tooltiptitle">
                                                    Thời gian kết thúc
                                                </p>
                                                <p class="tooltipmessage">
                                                    Thời gian kết thúc
                                                </p>
                                            </span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="key">
                                        Hiển thị
                                    </td>
                                    <td>
                                    @{ bool Active = ((Model.Active == null) || (Model.Active == false)) ? false : true; }
@Html.CheckBoxFor(model => Active)

                                        <span class="tooltip-help">
                                            <span class="tooltipContent">
                                                <p class="tooltiptitle">
                                                    Hiển thị
                                                </p>
                                                <p class="tooltipmessage">
                                                    Lựa chọn để danh mục sản phẩm hiển thị trên website
                                                </p>
                                            </span>
                                        </span>
                                    </td>
                                </tr>


                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
}
<script type="text/javascript">
    $(document).ready(function () {
        function bodauTiengViet(str) {
            str = str.toLowerCase();
            str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, "a");
            str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, "e");
            str = str.replace(/ì|í|ị|ỉ|ĩ/g, "i");
            str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, "o");
            str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, "u");
            str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, "y");
            str = str.replace(/đ/g, "d");
            return str;
        }
        $('#Name').keyup(function () {
            var text = $(this).val();
            var leght = $(this).val().length;
            $('#Title').val(text);
            $('#Keyword').val(bodauTiengViet(text) + "," + "Giá " + text + " rẻ nhất");
            $('.Soluong').html('Số ký tự là : ' + leght + ' (khuyến cáo là dưới 55 ký tự)');

            // alert(text);
            $.post("/Productad/CheckProduct", { "text": text },
                function (data) {
                    $('.Aler_ttxtName').html(data);
                    $(".txtName").css('border:1px solid #F00 !important');
                });
        });
        $('#Description').keyup(function () {
            var text = $(this).val();
            var leght = $(this).val().length;

            $('.Mota').html('Số ký tự là : ' + leght + ' (khuyến cáo là dưới 190 ký tự)');



        });

    });
</script>

<script type="text/javascript">
    $(document).ready(function () {
        var max_fields = 10; //maximum input boxes allowed
        var wrapper = $(".myinput"); //Fields wrapper
        var add_button = $(".btnAddNew"); //Add button ID

        var x = 0; //initlal text box count
        $(add_button).click(function (e) { //on add input button click
            e.preventDefault();
            if (x < max_fields) { //max input box allowed
                x++; //text box increment
                $(wrapper).append('<div>   <input type="file" name="uploadFile[' + x + ']" />&nbsp;&nbsp;<a href="#" class="btnRemove"  style="color:red">Xóa</a></div>'); //add input box
            }
        });

        $(wrapper).on("click", ".btnRemove", function (e) { //user click on remove text
            e.preventDefault(); $(this).parent('div').remove(); x--;
        })
    });
</script>
<script type="text/javascript">
    $(document).ready(function () {
        var max_fields = 10; //maximum input boxes allowed
        var wrapper = $(".myinputs"); //Fields wrapper
        var add_button = $(".btnAddNews"); //Add button ID

        var x = 0; //initlal text box count
        $(add_button).click(function (e) { //on add input button click
            e.preventDefault();
            if (x < max_fields) { //max input box allowed
                x++; //text box increment
                $(wrapper).append('<div>   <input type="file" name="uploadFiles[' + x + ']" />&nbsp;&nbsp;<a href="#" class="btnRemoves"  style="color:red">Xóa</a></div>'); //add input box
            }
        });

        $(wrapper).on("click", ".btnRemoves", function (e) { //user click on remove text
            e.preventDefault(); $(this).parent('div').remove(); x--;
        })
    });
</script>
<script src="~/Scripts/jquery-2.2.0.js"></script>
<script src="~/Scripts/jquery-ui.js"></script>
<link href="~/Scripts/jquery-ui.css" rel="stylesheet" />
<script src="~/Scripts/AutoComplete.js"></script>